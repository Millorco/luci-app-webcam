#!/bin/sh

# Script per aggiungere configurazione LED power a OpenWrt usando UCI

# Verifica se la configurazione LED esiste già
if uci -q get system.led_power > /dev/null 2>&1; then
    echo "La configurazione LED 'led_power' esiste già"
    exit 0
fi

# Aggiunge la configurazione LED usando UCI
uci set system.led_power=led
uci set system.led_power.name='power'
uci set system.led_power.sysfs='green:power'
uci set system.led_power.trigger='none'
uci set system.led_power.default='0'

# Salva le modifiche
uci commit system

echo "Configurazione LED aggiunta con successo"

# Riavvia il servizio LED per applicare le modifiche
/etc/init.d/led restart

echo "Servizio LED riavviato"
